<script>
  // 👇 Make sure this version matches your version.json version
  const CURRENT_VERSION = "v1";

  async function checkForNewVersion() {
    try {
      const res = await fetch("/version.json", { cache: "no-store" });
      const data = await res.json();

      if (data.version !== CURRENT_VERSION) {
        showUpdateBanner(data.message || "New version available — click to refresh");
      }
    } catch (err) {
      console.error("Version check failed:", err);
    }
  }

  function showUpdateBanner(message) {
    const banner = document.createElement("div");
    banner.innerHTML = `
      <strong>${message}</strong><br>
      <small>Click here to refresh and see the latest version.</small>
    `;
    banner.style.cssText = `
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      padding: 14px 24px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 9999;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
      text-align: center;
      font-family: system-ui, sans-serif;
      line-height: 1.4;
    `;
    banner.onclick = () => location.reload(true);
    document.body.appendChild(banner);
  }

  // 🔁 Check every 1 minute (60,000 ms)
  setInterval(checkForNewVersion, 60000);
</script>
