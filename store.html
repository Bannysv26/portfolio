  <!doctype html>
  <html lang="en">
  <head>
  <meta charset="UTF-8">
  <title>Drug Comparison Tool | Banny Pharmacy Store Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Image export -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

  <style>
  /* ================= BASE ================= */
  body{
    background:#f1f5f9;
    color:#0f172a;
    transition: background-color .4s ease, color .4s ease;
  }

  /* ================= DARK MODE ================= */
  body.dark{
    background:#020617;
    color:#e5e7eb;
  }

  /* ================= CARD ================= */
  .card{
    background:#ffffff;
    border:1px solid #e2e8f0;
  }
  body.dark .card{
    background:#020617 !important;
    border:1px solid #334155;
    color:#e5e7eb;
  }

  /* ================= HEADER & FOOTER ================= */
  body.dark header,
  body.dark footer{
    background:#020617 !important;
    color:#e5e7eb;
  }
  body.dark footer p,
  body.dark footer a{
    color:#cbd5f5 !important;
  }

  /* ================= INPUTS ================= */
  input{
    background:#ffffff;
    color:#0f172a;
  }
  input::placeholder{ color:#64748b; }

  body.dark input{
    background:#020617 !important;
    color:#f9fafb !important;
    border-color:#334155 !important;
  }
  body.dark input::placeholder{
    color:#94a3b8 !important;
  }

  /* ================= AUTOCOMPLETE ================= */
  .suggest{
    background:#ffffff;
    border:1px solid #e2e8f0;
    max-height:200px;
    overflow:auto;
    z-index:50;
  }
  .suggest li{ padding:10px; cursor:pointer; }
  .suggest li:hover{ background:#e5e7eb; }

  body.dark .suggest{
    background:#020617;
    border-color:#334155;
  }
  body.dark .suggest li:hover{
    background:#1e293b;
  }

  /* ================= TABLE ================= */
  table{
    width:100%;
    border-collapse:collapse;
  }
  th,td{
    border:1px solid #e2e8f0;
    padding:10px;
  }
  body.dark th,
  body.dark td{
    background:#020617;
    color:#e5e7eb;
    border-color:#334155;
  }
  .highlight{
    background:#fff7ed;
    border-left:4px solid #f97316;
  }
  body.dark .highlight{
    background:#1e293b;
  }

  /* ================= BUTTON ================= */
  button{
    background:#2563eb;
    color:#ffffff;
  }
  body.dark button{
    background:#2563eb;
  }

  /* ================= TOGGLE (CANVA STYLE) ================= */
  .canva-toggle{
    width:54px;
    height:26px;
    background:#1f2937;
    border-radius:999px;
    position:relative;
    cursor:pointer;
  }
  .canva-toggle .knob{
    position:absolute;
    top:3px;
    left:3px;
    width:20px;
    height:20px;
    background:#facc15;
    border-radius:50%;
    transition:.45s cubic-bezier(.4,0,.2,1);
  }
  .canva-toggle .icon{
    position:absolute;
    top:6px;
    width:14px;
    height:14px;
    border-radius:50%;
    opacity:0;
  }
  .canva-toggle .sun{
    left:8px;
    background:#facc15;
    opacity:1;
  }
  .canva-toggle .moon{
    right:8px;
    background:#e5e7eb;
    transform:scale(.6);
  }
  body.dark .canva-toggle{ background:#020617; }
  body.dark .knob{ transform:translateX(28px); background:#e5e7eb; }
  body.dark .sun{ opacity:0; }
  body.dark .moon{ opacity:1; transform:scale(1); }
  </style>

<!-- FAVICON (WORKING) -->
<link rel="icon" type="image/x-icon" href="./favicon.ico?v=1">



  </head>

  <body>

  <!-- HEADER -->
  <header class="shadow">
    <div class="max-w-6xl mx-auto px-6 py-6 flex justify-between items-center">
      <div>
        <h1 class="text-2xl font-bold">Drug Comparison Tool</h1>
        <p class="text-sm text-gray-600">Powered by FDA Drug Database</p>
      </div>
      <div class="flex items-center gap-4">
        <span class="text-green-500 font-semibold">Live FDA Data</span>
        <div class="canva-toggle" onclick="toggleTheme()">
          <div class="icon sun"></div>
          <div class="icon moon"></div>
          <div class="knob"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto px-6 py-10">

  <section id="search" class="card p-8 rounded-xl shadow">
    <h2 class="text-xl font-bold text-center mb-6">Compare Two Medicines</h2>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <label class="font-semibold">Drug A</label>
        <input id="aInput" class="w-full border p-3 rounded mt-2" placeholder="Type at least 3 letters">
        <ul id="aList" class="suggest hidden"></ul>
      </div>
      <div>
        <label class="font-semibold">Drug B</label>
        <input id="bInput" class="w-full border p-3 rounded mt-2" placeholder="Type at least 3 letters">
        <ul id="bList" class="suggest hidden"></ul>
      </div>
    </div>

    <button onclick="compare()" class="mt-6 w-full py-4 rounded font-semibold">Compare</button>
  </section>

  <section id="result" class="hidden mt-10">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold">Comparison Results</h2>
      <button onclick="downloadImage()" class="px-4 py-2 rounded">Download Image</button>
    </div>
<button
  onclick="resetComparison()"
  class="mt-6 w-full bg-white border border-slate-300 py-4 rounded-lg font-semibold hover:bg-slate-100">
  üîÅ Compare Another Drugs
</button>

    <div id="capture" class="card p-6 rounded-xl shadow">
      <div id="table"></div>

      <div class="text-xs mt-6">
        <hr class="mb-2">
        <strong>Banny Pharmacy Store Online</strong><br>
        Created by Banny SV<br><br>
        <em>Educational purpose only. Banny SV AI can make mistakes.</em>
      </div>
    </div>
  </section>

  </main>

  <footer class="text-center text-sm py-8">
    <p>‚ö† Educational Purpose Only</p>
    <p class="mt-2">
      Follow:
      <a href="https://bannysv.netlify.app" target="_blank" class="underline">
        bannysv.netlify.app
      </a>
    </p>
  </footer>

  <script>
  function toggleTheme(){
    document.body.classList.toggle("dark");
    localStorage.setItem("theme",
      document.body.classList.contains("dark") ? "dark" : "light");
  }
  if(localStorage.getItem("theme")==="dark"){
    document.body.classList.add("dark");
  }

  /* FDA SEARCH */
  let cache={}, A=null, B=null;

  async function fetchDrugs(q){
    if(cache[q]) return cache[q];
    const res = await fetch(
      `https://api.fda.gov/drug/label.json?search=(openfda.brand_name:${q}*+openfda.generic_name:${q}*)&limit=8`
    );
    const data = await res.json();
    if(!data.results) return [];
    const clean=data.results.map(x=>({
      name:x.openfda.brand_name?.[0] || "Unknown",
      use:(x.indications_and_usage?.[0]||"Not available").slice(0,120),
      side:(x.adverse_reactions?.[0]||"Not available").slice(0,120)
    }));
    cache[q]=clean;
    return clean;
  }

  function auto(input,list,set){
    input.oninput=async()=>{
      const q=input.value.trim();
      if(q.length<3){list.classList.add("hidden");return;}
      const r=await fetchDrugs(q);
      list.innerHTML="";
      r.forEach(d=>{
        const li=document.createElement("li");
        li.textContent=d.name;
        li.onclick=()=>{input.value=d.name;set(d);list.classList.add("hidden");};
        list.appendChild(li);
      });
      list.classList.remove("hidden");
    };
  }
  auto(aInput,aList,d=>A=d);
  auto(bInput,bList,d=>B=d);

  function compare(){
    if(!A||!B||A.name===B.name){ alert("Select two different medicines"); return; }
    search.classList.add("hidden");
    result.classList.remove("hidden");
    table.innerHTML=`
    <table>
      <tr><th>Category</th><th>${A.name}</th><th>${B.name}</th></tr>
      <tr class="highlight"><td>Uses</td><td>${A.use}</td><td>${B.use}</td></tr>
      <tr><td>Side Effects</td><td>${A.side}</td><td>${B.side}</td></tr>
    </table>`;
  }

  function downloadImage(){
    html2canvas(capture,{scale:2,backgroundColor:"#fff"})
      .then(c=>{
        const a=document.createElement("a");
        a.href=c.toDataURL("image/png");
        a.download="Drug_Comparison.png";
        a.click();
      });
  }
  </script>
<script>
function resetComparison(){
  // clear selected drugs
  A = null;
  B = null;

  // clear inputs
  document.getElementById("aInput").value = "";
  document.getElementById("bInput").value = "";

  // hide results, show search
  document.getElementById("result").classList.add("hidden");
  document.getElementById("search").classList.remove("hidden");

  // clear table
  document.getElementById("table").innerHTML = "";
}
</script>


  </body>
  </html>
